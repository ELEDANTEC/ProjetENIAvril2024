<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
<div class="container container-update-my-profil">
    <div class="row">
        <div class="col-md-12">

            <div class="title">ENI-Enchères</div>
            <div class="content-profil-value">
                <form id="updateUserForm" action="/api/user/update/{userId}" method="post">
                    <div class="mb-3 test">
                        <label for="pseudo" class="form-label">Pseudo</label>
                        <input type="text" class="form-control" id="pseudo" value="${user.userName}">
                    </div>
                    <div class="mb-3 test">
                        <label for="lastName" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="lastName" >
                    </div>
                    <div class="mb-3 test">
                        <label for="firstName" class="form-label">Prénom</label>
                        <input type="text" class="form-control" id="firstName" value="">
                    </div>
                    <div class="mb-3 test">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email">
                    </div>
                    <div class="mb-3 test">
                        <label for="telephoneNumber" class="form-label">Téléphone</label>
                        <input type="email" class="form-control" id="telephoneNumber">
                    </div>
                    <div class="mb-3 test">
                        <label for="street" class="form-label">Rue</label>
                        <input type="text" class="form-control" id="street" aria-describedby="roadHelp">
                    </div>
                    <div class="mb-3 test">
                        <label for="postal_code" class="form-label">Code postal</label>
                        <input type="email" class="form-control" id="postal_code">
                    </div>
                    <div class="mb-3 test">
                        <label for="city" class="form-label">Ville</label>
                        <input type="text" class="form-control" id="city">
                    </div>
                    <div class="mb-3 test">
                        <label for="password" class="form-label">Mot de passe actuel</label>
                        <input type="password" class="form-control" id="password">
                    </div>
                    <div class="mb-3 test">
                        <label for="newPassword" class="form-label">nouveau mot de passe</label>
                        <input type="password" class="form-control" id="newPassword">
                    </div>
                    <div class="mb-3 test">
                        <label for="confirmationPassword" class="form-label">Confirmation</label>
                        <input type="password" class="form-control" id="confirmationPassword">
                    </div>
                </form>
            </div>
            <div class="d-grid gap-2 col-6 mx-auto">
                <button type="submit" class="btn btn-primary" onclick="updateUser(1)">Submit</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
    function updateUser(userId) {
        var pseudo = document.getElementById("pseudo").value;
        var lastName = document.getElementById("lastName").value;
        var firstName = document.getElementById("firstName").value;
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phone").value;
        var street = document.getElementById("street").value;
        var postal_code = document.getElementById("postal_code").value;
        var city = document.getElementById("city").value;

        var userData = {
            userId: userId,
            username: pseudo,
            lastName: lastName,
            firstName: firstName,
            email: email,
            phone: phone,
            street: street,
            postal_code: postal_code,
            city: city,
        };

        fetch("/api/user/update/" + userId, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(userData),
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log('Updated successfully:', data);
            })
            .catch(error => {
                console.error('There was an error updating the user:', error);
            });
    }
</script>

<style>
    .container-update-my-profil{
        padding-top: 5%;
    }
    .container-update-my-profil .title{
        font-size: 24px;
    }

    .container-update-my-profil .content-profil-value{
        display: flex;
        justify-content: center;
    }

    .container-update-my-profil .test {
        display: flex;
        align-items: flex-end;
        column-gap: 20px;
    }
</style>